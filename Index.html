<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Checkout form</title>
 
</head>
    
<body class="bg-light"> <!-- Provides color to the body -->

<!-- Logo -->
    <div class="mt-3 text-center">
        <img class="mx-auto" src="https://github.com/AaronS87/HTML-Project/blob/master/IULogo.png?raw=true" alt="Logo" with="150" height="150"> <br> <!-- mx-auto = bootstrap add auto horizontal (x axis) margins (m) -->
        <label class="line" for=""></label>
    </div>

<!-- Internal CSS -->

    <!-- Blue line -->
    <style>
        .line {
            background: rgb(6, 6, 148);
            height: 5px;
            max-width: 65%;
            margin: 2rem auto; /* 2rem = 2 times the font size / auto = center horizontally the elements in the container */
            margin-top: -25px;
            width: 150%;
        }
    </style>

    <!-- Padding between columns -->
    <style>

        #bLeftCol {
            padding-right: 30px; 
        }
        #bRightCol {
            padding-left: 30px; 
        }

    </style>

    <!-- h2 properties -->
    <style>
        h2 { color: rgb(49, 49, 216); 
        width: 100%;
    }

    </style>

    <!-- h6 properties -->
    <style>
        h6 { border-bottom: 1px solid black; 
    }

    </style>

    <!-- Container products properties -->
    <style>
        .containerP {
            display: flex; /* Products columns adjust with the browser size and keeps 3 columns at the max. possible */
        }
    </style>

    <!-- Basket items properties -->
    <style>
        .item {
            flex: 1; /* Adjust the distance between products when they are at the min. size*/
        }
    </style>

    <!-- Asterix property -->
    <style>
        #required::before {
        content: "* ";
        color: red;
        }
    </style>

    <!-- Buttons properties -->
    <style>
        .btn{
            background-color: rgb(89, 89, 241);
        } 
    </style>

    <!-- Zipcode error message -->
    <style>
        .error { 
            border: 1px solid red;
        } /* error colored border*/

        .error-message {
            display: none;
            color: red;
            margin-top: -25px;
            font-size: 14px;
        } /* error message below the input*/
    </style>

    <!-- Phone error message -->
    <style>
        .errorPhone {
            border: 1px solid red;
        }

        .error-message-phone {
            display: none;
            color: red;
            margin-top: -25px;
            font-size: 14px;
        }
    </style>

    <!-- Email error message -->
    <style>
        .errorEmail {
            border: 1px solid red;
        }

        .error-message-email {
            display: none;
            color: red;
            margin-top: -25px;
            font-size: 14px;
        }
    </style>



<!-- Whole container -->

    <div id="wContainer" class="container"> <!-- Whole container -->
        <div id="bodyCol" class="row justify-content-center">

<!-- Left container -->

            <!-- Left column container -->
            <div id="bLeftCol" class="col-sm-8">
                
                <h2>Billing address</h2> <!-- Title left container -->

                <hr class="my-3"> <!-- "hr" = creates a line / "my" is like mx, but in "y" axis -->

                <!-- First and last name -->
                <div class="row"> <!-- Contains a row with two inputs -->
                    <div class="col-sm-6"> <!-- Bootstrap class where "col" stands for column, "sm" small, and "6" takes 50% of available width that max is 12 -->
                        <label id="required" for="fname">First name</label><br>
                        <input type="text" id="fname" name="fname" placeholder="Bladimiro Francisco" required><br>
                    </div>
                    <div class="col-sm-6">
                        <label id="required" for="lname">Last name</label><br>
                        <input type="text" id="lname" name="lname" placeholder="Salazar Barrios" required><br>
                    </div>
                </div>

                <!-- Country, region, and province -->       
                <div class="row mb-4"> <!-- Bootstrap class where "mb" stands for margin bottom -->
                    <div class="col-sm-4">
                        <label id="required" for="country" class="form-label">Country</label>
                        <select id="country" class="form-control"> <!-- Bootstrap class where "creates" a form --> 
                            <option>Select...</option>
                        </select>
                    </div>
                    
                    <div class="col-sm-4">
                        <label id="required" for="region" class="form-label">Region</label>
                        <select id="region" class="form-control">
                            <option>Select...</option>
                        </select>
                    </div>

                    <div class="col-sm-4">
                        <label id="required" for="province" class="form-label">Province</label><br>
                        <select id="province" class="form-control">
                            <option value="">Select...</option>
                        </select>
                    </div>
                </div>

                <!-- City and zipcode -->
                <div class="row">
                    <div class="col-sm-6">
                        <label id="required" for="city" class="form-label">City, town, or village</label><br>
                        <input type="text" id="city" name="city" placeholder="Puerto del Carmen, Tías" required><br>
                    </div>
                    <div class="col-sm-6">
                        <label id="required" for="zipcode" class="form-label">Zip code</label><br>
                        <input type="text" id="zipcode" pattern="[0-9]+" name="zipcode" placeholder="35510" title="Only numbers are allowed" required><br>
                        <div id="error-message" class="error-message">Please enter a valid zipcode.</div>
                    </div>
                </div>

                <!-- Address street and number -->
                <div class="row">
                    <div class="col-sm-6">
                        <label id="required" for="fname">Address street</label><br>
                        <input type="text" id="astreet" name="astreet" placeholder="Av. de las Playas" required><br>
                    </div>
                    <div class="col-sm-6">
                        <label id="required" for="anumber">Address number</label><br>
                        <input type="text" id="anumber" name="anumber" placeholder="S/N" required><br>
                    </div>
                </div>

                <!-- Email and phone number -->
                <div class="row">
                    <div class="col-sm-6">
                        <label id="required" for="email">Email</label><br>
                        <input type="text" id="email" name="email" placeholder="perenquen@example.com" required><br>
                        <div id="error-message-email" class="error-message-email">Please enter a valid email address.</div>
                    </div>
                    <div class="form-group col-sm-6">
                        <label id="required" for="phone">Telephone number</label><br>
                        <input type="tel" id="phone" pattern="(\+[0-9]+\s*)|[0-9\s]+" name="phone" placeholder="+34 612 345 678" title="Only numbers and + symbol are allowed" required><br>
                        <div id="error-message-phone" class="error-message-phone">Please enter a valid phone number.</div>
                    </div>
                </div>

                <hr class="my-3">

                <!-- Company name -->
                <label for="companyname">Company name or other details</label><br>
                <input type="text" id="companyname" name="companyname" placeholder="My company"><br>

            </div>

<!-- right container -->

            <!-- Right column container -->
            <div id="bRightCol" class="col-sm-4" style="border:1px solid black;">

                <h2>Order summary</h2> <!-- Title right container -->

                <hr class="my-3">

                <!-- Product 1 -->
                <div id="productCpu" class="containerP flex-sm-column flex-lg-row">
                    <div id="productImage" class="item">
                        <img style="max-width: 80px; aspect-ratio: 3/2; object-fit: contain;" src="https://github.com/AaronS87/HTML-Project/blob/master/amd-1310766_1280.jpg?raw=true"> <!-- object-fit and aspect-ratio makes images same size and fits perfectly in the container -->
                    </div>
                    <div id="productName" class="item px-2 w-auto"> <!-- "px" stands for padding in the x axis -->
                        <h6>CPU</h6>
                        <p>AMD Ryzen 9 7950X3D</p>
                    </div>
                    <div id="ProductPrice" class="item px-2 w-auto">
                        <h6>Price</h6>
                        <p><span class="value1">792.33 </span> €</p>
                        <h6>Quantity</h6>
                        <p><span class="quantity1">1 </span> </p>
                    </div>
                </div>

                <hr class="my-3">

                <!-- Product 2 -->              
                <div id="productRam" class="containerP flex-sm-column flex-lg-row">
                    <div id="productImage" class="item">
                        <img style="max-width: 80px; aspect-ratio: 3/2; object-fit: contain;" src="https://github.com/AaronS87/HTML-Project/blob/master/memory-4704236_1280.jpg?raw=true">
                    </div>
                    <div id="productName" class="item px-2 w-auto">
                        <h6 id="ram" text-decoration: underline;>Ram</h6>
                        <p>Kingston FURY Renegade RGB DDR4 3600 MHz 32GB CL18</p>
                    </div>
                    <div id="ProductPrice" class="item px-2 w-auto">
                        <h6>Price</h6>
                        <p><span class="value2">132.33 </span> €</p>
                        <h6>Quantity</h6>
                        <p><span class="quantity2">2 </span> </p>
                    </div>
                </div>

                <hr class="my-3">

                <!-- Product total sum -->  
                <div id="totalText" class="containerP flex-sm-column flex-lg-row">
                    <div class="item px-2 w-auto">
                        <h2>Total</h2> <h3>
                    </div>
                    <div class="item px-2 w-auto" style="text-align: right;">
                        <h3><p id="totalAmount"></p></h3>
                    </div>
                </div>

                <!-- Button continue shopping -->
                <div class="container mt-4 mb-4">
                    <button id="buttonContinueShopping" type="button" class="btn btn-primary">Continue shopping</button> <!-- Bootstrap buton with predifine characteristics -->  
                </div>

            </div>
            
        </div>

<!-- Button payment -->

    <div class="container mt-4 mb-4">
            <button id="buttonPayment" type="button" class="btn btn-primary">Continue to the payment</button>
    </div>

<!-- JavaScript -->  <!-- CORRECTED UNTIL HERE -->  

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- JS form for left column -->
    <script>
        $(document).ready(function() { /* Gets the document "ready" in order to manipulate safely the page */
            $('#bLeftCol input').addClass('form-control'); /* Selects all "inputs" dependent on the ID "bLeftCol" and adds a class "form-control" */
        });
    </script>

    <!-- JS for the country, region, and province -->
    <script>
        let countries = ["Bulgaria", "Spain"]; /* "let" used to declare a variable + name*/

        let Spain = ["Andalucía", "Aragón", "Asturias", "Cantabria", "Castilla-La Mancha", "Castilla y León", "Cataluña", "Comunidad de Madrid", "Comunidad Valenciana", "Extremadura", "Galicia", "Islas Baleares", "Islas Canarias", "La Rioja", "Navarra", "País Vasco", "Región de Murcia"];

        let Andalucia = ["Almería", "Cádiz", "Córdoba", "Granada", "Huelva", "Jaén", "Málaga", "Sevilla"];
        let Aragon = ["Huesca", "Teruel", "Zaragoza"];
        let Asturias = ["Asturias"];
        let Baleares = ["Islas Baleares"];
        let Canarias = ["Las Palmas", "Santa Cruz de Tenerife"];
        let Cantabria = ["Cantabria"];
        let CastillaLaMancha = ["Albacete", "Ciudad Real", "Cuenca", "Guadalajara", "Toledo"];
        let CastillaYLeon = ["Ávila", "Burgos", "León", "Palencia", "Salamanca", "Segovia", "Soria", "Valladolid", "Zamora"];
        let Catalunya = ["Barcelona", "Girona", "Lleida", "Tarragona"];
        let Extremadura = ["Badajoz", "Cáceres"];
        let Galicia = ["A Coruña", "Lugo", "Ourense", "Pontevedra"];
        let Madrid = ["Comunidad de Madrid"];
        let Murcia = ["Región de Murcia"];
        let Navarra = ["Navarra"];
        let Valencia = ["Alicante", "Castellón", "Valencia"];

        let Bulgaria = ["Северозападен район", "Северен-централен район", "Североизточен район", "Югоизточен район", "Южен-централен район", "Югозападен район"];

        let NortheastRegion = ["Добрич", "Шумен", "Търговище", "Варна"];
        let NorthCentralRegion = ["Габрово", "Ловеч", "Плевен", "Велико Търново"];
        let NorthwestRegion = ["Монтана", "Плевен", "Видин", "Враца"];
        let SouthCentralRegion = ["Хасково", "Кърджали", "Пазарджик", "Пловдив", "Смолян"];
        let SoutheastRegion = ["Бургас", "Сливен", "Стара Загора", "Ямбол"];
        let SouthwestRegion = ["Благоевград", "Кюстендил", "Перник", "София (столица)", "София"];

        let country = document.getElementById("country"); /* "country" variable will hold a reference to the ID "country" */
        let region = document.getElementById("region");
        let province = document.getElementById("province");

/* CONTINUE HERE*/

        countries.forEach(function addcountries(item){
            let option = document.createElement("option");
            option.text = item;
            option.value = item;
            country.appendChild(option);
        });

        country.onchange = function(){
            region.innerHTML = "<option></option>";
            if(this.value == "Bulgaria"){
                addToRegion(Bulgaria);
            }
            if(this.value == "Spain"){
                addToRegion(Spain);
            }
        }

        region.onchange = function() {
            province.innerHTML = "<option></option>";
            if (this.value === "Andalucía") {
                addToProvince(Andalucia);
            }
            if (this.value === "Aragón") {
                addToProvince(Aragon);
            }
            if (this.value === "Asturias") {
                addToProvince(Asturias);
            }
            if (this.value === "Cantabria") {
                addToProvince(Cantabria);
            }
            if (this.value === "Castilla-La Mancha") {
                addToProvince(CastillaLaMancha);
            }
            if (this.value === "Castilla y León") {
                addToProvince(CastillaYLeon);
            }
            if (this.value === "Cataluña") {
                addToProvince(Cataluña);
            }
            if (this.value === "Comunidad de Madrid") {
                addToProvince(ComunidadDeMadrid);
            }
            if (this.value === "Comunidad Valenciana") {
                addToProvince(ComunidadValenciana);
            }
            if (this.value === "Extremadura") {
                addToProvince(Extremadura);
            }
            if (this.value === "Galicia") {
                addToProvince(Galicia);
            }
            if (this.value === "Islas Baleares") {
                addToProvince(Baleares);
            }
            if (this.value === "Islas Canarias") {
                addToProvince(IslasCanarias);
            }
            if (this.value === "La Rioja") {
                addToProvince(LaRioja);
            }
            if (this.value === "Navarra") {
                addToProvince(Navarra);
            }
            if (this.value === "País Vasco") {
                addToProvince(PaisVasco);
            }
            if (this.value === "Región de Murcia") {
                addToProvince(RegionDeMurcia);
            }
            if (this.value === "Североизточен район") {
                addToProvince(NortheastRegion);
            }
            if (this.value === "Северозападен район") {
                addToProvince(NorthwestRegion);
            }
            if (this.value === "Югоизточен район") {
                addToProvince(SoutheastRegion);
            }
            if (this.value === "Южен-централен район") {
                addToProvince(SouthCentralRegion);
            }
            if (this.value === "Югозападен район") {
                addToProvince(SouthwestRegion);
            }
            if (this.value === "Северен-централен район") {
                addToProvince(NorthCentralRegion);
            }
        }

        function addToRegion(arr){
            arr.forEach(function (item){
                let option = document.createElement("option");
                option.text = item;
                option.value = item;
                region.appendChild(option);
            })
        }

        function addToProvince(arr){
            arr.forEach(function (item){
                let option = document.createElement("option");
                option.text = item;
                option.value = item;
                province.appendChild(option);
            })
        }

    </script>

    <!-- JS for wrong zipcode input -->
    <script>
        const zipcodeInput = document.getElementById('zipcode');
        const errorMessage = document.getElementById('error-message');

        zipcodeInput.addEventListener('blur', function() {
            if (!this.value) {
                this.classList.remove('error');
                errorMessage.style.display = 'none';
            } else if (!/^[0-9]+$/.test(this.value)) {
                this.classList.add('error');
                errorMessage.style.display = 'block';
            } else {
                this.classList.remove('error');
                errorMessage.style.display = 'none';
            }
        });
    </script>

    <!-- JS for wrong number input -->
    <script>
        const phonecodeInput = document.getElementById('phone');
        const errorMessagePhone = document.getElementById('error-message-phone');

        phonecodeInput.addEventListener('blur', function() {
            if (!this.value) {
                this.classList.remove('errorPhone');
                errorMessagePhone.style.display = 'none';
            } else if (!/^(\+[0-9]+\s*)|[0-9\s]+$/.test(this.value)) {
                this.classList.add('errorPhone');
                errorMessagePhone.style.display = 'block';
            } else {
                this.classList.remove('errorPhone');
                errorMessagePhone.style.display = 'none';
            }
        });
    </script>

    <!-- JS for wrong email input -->
    <script>
        const emailInput = document.getElementById('email');
        const emailErrorMessage = document.getElementById('error-message-email');

        emailInput.addEventListener('blur', function() {
            if (!this.value) {
                this.classList.remove('error');
                emailErrorMessage.style.display = 'none';
            } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.value)) {
                this.classList.add('error');
                emailErrorMessage.style.display = 'block';
            } else {
                this.classList.remove('error');
                emailErrorMessage.style.display = 'none';
            }
        });
    </script>

    <!-- JS for basket calculation -->
    <script>
        const price1 = parseFloat(document.querySelector('.value1').textContent);
        const quantity1 = parseFloat(document.querySelector('.quantity1').textContent);
        const totalProduct1 = price1 * quantity1;

        const price2 = parseFloat(document.querySelector('.value2').textContent);
        const quantity2 = parseFloat(document.querySelector('.quantity2').textContent);
        const totalProduct2 = price2 * quantity2;

        const totalCost = totalProduct1 + totalProduct2;

        const totalAmountElement = document.getElementById('totalAmount');
        totalAmountElement.innerHTML = `<span>${totalCost.toFixed(2)} </span> €`;
    </script>

    <!-- JS for continue shopping button -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var continueShoppingButton = document.getElementById("buttonContinueShopping");
            
            continueShoppingButton.addEventListener("click", function() {
                alert("This is a test site. You have to buy both components.");
            });
        });
    </script>

    <!-- JS payment button -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const buttonPayment = document.getElementById('buttonPayment');
            const errorMessage = document.getElementById('error-message');
            const errorMessagePhone = document.getElementById('error-message-phone');
            const errorMessageEmail = document.getElementById('error-message-email');

            buttonPayment.addEventListener('click', function() {
                const mandatoryFields = [
                    'fname', 'lname', 'country', 'region', 'province', 'city', 'zipcode',
                    'astreet', 'anumber', 'email', 'phone'
                ];

                let allFieldsCompleted = true;
                let phoneValid = true;
                let zipcodeValid = true;
                let emailValid = true;

                for (const field of mandatoryFields) {
                    const inputField = document.getElementById(field);
                    if (!inputField.value.trim()) {
                        inputField.classList.add('error');
                        allFieldsCompleted = false;
                    } else {
                        inputField.classList.remove('error');
                    }
                }

                const emailInput = document.getElementById('email');
                if (!emailInput.value.match(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/)){
                    emailInput.classList.add('errorEmail');
                    errorMessageEmail.style.display = 'block';
                    allFieldsCompleted = false;
                    emailValid = false;
                } else {
                    emailInput.classList.remove('errorEmail');
                    errorMessageEmail.style.display = 'none';
                }

                const zipcodeInput = document.getElementById('zipcode');
                if (!zipcodeInput.value.match(/^[0-9]+$/)) {
                    zipcodeInput.classList.add('error');
                    errorMessage.style.display = 'block';
                    allFieldsCompleted = false;
                    zipcodeValid = false;
                } else {
                    zipcodeInput.classList.remove('error');
                    errorMessage.style.display = 'none';
                }

                const phonecodeInput = document.getElementById('phone');
                if (!phonecodeInput.value.match(/^(\+[0-9]+\s*)|[0-9\s]+$/)) {
                    phonecodeInput.classList.add('errorPhone');
                    errorMessagePhone.style.display = 'block';
                    allFieldsCompleted = false;
                    phoneValid = false;
                } else {
                    phonecodeInput.classList.remove('errorPhone');
                    errorMessagePhone.style.display = 'none';
                }

                if (allFieldsCompleted) {
                    alert("Thank you for trying to buy with us");
                } else {
                    if (!phoneValid || !zipcodeValid || !emailValid) {
                        alert("You have to complete all the mandatory fields or they have some mistakes.");
                    } else {
                        alert("You have to complete all the mandatory fields.");
                    }
                }
            });
        });
    </script>

</body>
</html>

<!-- Añadir los euros con JavaScript -->
<!-- Añadir código descuento -->
<!-- Problema separación entre nombre y caja -->